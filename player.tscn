[gd_scene load_steps=13 format=3 uid="uid://br01chminlckq"]

[ext_resource type="Script" path="res://Scripts/CharacterBody3D.gd" id="1_502fm"]
[ext_resource type="Script" path="res://Scripts/Abilities/ability_manager.gd" id="2_c20k6"]
[ext_resource type="Script" path="res://Scripts/player_camera.gd" id="3_amtfd"]
[ext_resource type="Resource" uid="uid://dg8n8figmoq21" path="res://Resources/Abilities/hollow_purple.tres" id="6_i7tg1"]
[ext_resource type="Script" path="res://Scripts/third_person_camera.gd" id="8_5iau8"]
[ext_resource type="PackedScene" uid="uid://y8i3mjchtfs5" path="res://Scenes/Visuals/main_character.tscn" id="8_pumas"]
[ext_resource type="PackedScene" uid="uid://d1b16gqb42bv6" path="res://Scenes/Player/hud.tscn" id="9_mtpk3"]
[ext_resource type="Script" path="res://Scripts/Modules/health_module.gd" id="10_icsec"]
[ext_resource type="PackedScene" uid="uid://da3xpdwuyxm0p" path="res://Scenes/Mapa/map_camera.tscn" id="11_8ulp4"]

[sub_resource type="ViewportTexture" id="ViewportTexture_23jgk"]
viewport_path = NodePath("Visuals/AboveHead/SubViewport")

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_ua1y4"]
radius = 0.783179
height = 4.38927

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_4ipxv"]
properties/0/path = NodePath(".:position")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath(".:rotation")
properties/1/spawn = true
properties/1/replication_mode = 1
properties/2/path = NodePath("Visuals:rotation")
properties/2/spawn = true
properties/2/replication_mode = 1
properties/3/path = NodePath("Visuals/MainCharacter/AnimationPlayer:current_animation")
properties/3/spawn = true
properties/3/replication_mode = 2
properties/4/path = NodePath("Cameras/FirstPersonCamera:rotation")
properties/4/spawn = true
properties/4/replication_mode = 1
properties/5/path = NodePath("HealthModule:health")
properties/5/spawn = true
properties/5/replication_mode = 2
properties/6/path = NodePath("Visuals:visible")
properties/6/spawn = true
properties/6/replication_mode = 2
properties/7/path = NodePath("AbilityManager:currentAbilityIndex")
properties/7/spawn = true
properties/7/replication_mode = 2

[node name="CharacterBody3D" type="CharacterBody3D" node_paths=PackedStringArray("firstPersonCamera", "visuals", "threeDmodel", "characterAnimator", "spawnCamera", "usernameLabel", "thirdPersonCamera", "springArm", "thirdPersonShoulderCam", "camMount", "healthModule") groups=["player"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.932028, 0)
collision_layer = 2
script = ExtResource("1_502fm")
gravity = 20.0
offsetThirdPerson = Vector3(0, 3.3, 0)
sensHorizontal = 0.2
sensVetical = 0.2
hudScene = ExtResource("9_mtpk3")
firstPersonCamera = NodePath("Cameras/FirstPersonCamera")
visuals = NodePath("Visuals")
threeDmodel = NodePath("Visuals/MainCharacter")
characterAnimator = NodePath("Visuals/MainCharacter/AnimationPlayer")
spawnCamera = NodePath("Cameras/MapCamera")
usernameLabel = NodePath("Visuals/AboveHead/SubViewport/Username")
thirdPersonCamera = NodePath("Cameras/ThirdPerson/ThirdPersonCamera")
springArm = NodePath("Cameras/ThirdPerson")
thirdPersonShoulderCam = NodePath("Cameras/CameraMount/SpringArm3D/Camera3D")
camMount = NodePath("Cameras/CameraMount")
healthModule = NodePath("HealthModule")

[node name="Visuals" type="Node3D" parent="."]

[node name="MainCharacter" parent="Visuals" instance=ExtResource("8_pumas")]
transform = Transform3D(-2.395, 0, 3.61635e-07, 0, 2.395, 0, -3.61635e-07, 0, -2.395, 0, -0.90546, 0)

[node name="Skeleton3D" parent="Visuals/MainCharacter/Armature_004" index="0"]
bones/0/position = Vector3(0.261676, -0.126294, -98.996)
bones/0/rotation = Quaternion(-0.727833, -0.0534292, 0.0123827, 0.683558)
bones/1/rotation = Quaternion(-0.0316308, 0.0113977, 0.0227614, 0.999175)
bones/2/rotation = Quaternion(0.0102876, 0.00116034, 0.013812, 0.999851)
bones/3/rotation = Quaternion(0.0675552, 0.00215438, 0.0137748, 0.997618)
bones/4/position = Vector3(2.54808e-05, 15.0277, 0.877905)
bones/4/rotation = Quaternion(0.0518999, -0.000898355, 0.00392665, 0.998644)
bones/5/rotation = Quaternion(-0.0659574, 0.0119384, -0.00149318, 0.99775)
bones/7/rotation = Quaternion(-0.598232, -0.434525, 0.507674, -0.442238)
bones/8/position = Vector3(1.84226e-06, 12.9223, 7.88969e-06)
bones/8/rotation = Quaternion(0.54345, 0.184005, 0.203011, 0.793468)
bones/9/position = Vector3(1.34292e-05, 27.4047, 1.27254e-05)
bones/9/rotation = Quaternion(5.64744e-07, 5.23067e-08, 0.012735, 0.999919)
bones/10/position = Vector3(-8.88504e-08, 27.6145, 1.39405e-06)
bones/10/rotation = Quaternion(0.0483052, -0.28489, 0.026825, 0.956967)
bones/11/rotation = Quaternion(0.209859, -0.059562, 0.207504, 0.9536)
bones/12/rotation = Quaternion(-0.142706, 0.0865976, -0.240534, 0.956179)
bones/13/position = Vector3(-3.75509e-06, 4.38213, -2.1332e-05)
bones/13/rotation = Quaternion(-0.121022, -0.0755413, 0.0240541, 0.989479)
bones/14/position = Vector3(-4.31194e-06, 3.45908, -8.14961e-07)
bones/15/rotation = Quaternion(0.0662174, 0.000733504, 0.00843572, 0.997769)
bones/16/rotation = Quaternion(0.150996, -9.71096e-07, -0.01548, 0.988413)
bones/17/position = Vector3(2.9173e-08, 3.41516, 1.01295e-05)
bones/17/rotation = Quaternion(0.0700819, -1.3211e-07, -0.00718172, 0.997515)
bones/18/position = Vector3(-4.08107e-07, 3.07799, -3.11878e-07)
bones/19/rotation = Quaternion(0.136531, -0.00383593, -0.0229524, 0.990362)
bones/20/position = Vector3(1.52746e-07, 3.61396, -1.73848e-06)
bones/20/rotation = Quaternion(0.151255, -1.0636e-07, -0.0155002, 0.988373)
bones/21/rotation = Quaternion(0.159933, -1.17006e-07, -0.0163893, 0.986992)
bones/22/position = Vector3(-3.14252e-05, 3.68019, 3.04039e-06)
bones/23/position = Vector3(2.21664, 12.147, -0.00999657)
bones/23/rotation = Quaternion(0.18325, -0.0046523, -0.0314508, 0.982552)
bones/24/position = Vector3(4.78507e-07, 3.60118, -4.38649e-06)
bones/24/rotation = Quaternion(0.181386, -1.54489e-06, -0.018596, 0.983236)
bones/25/position = Vector3(6.34181e-07, 3.30733, -5.86247e-06)
bones/25/rotation = Quaternion(0.155213, 1.01594e-07, -0.0159055, 0.987753)
bones/26/position = Vector3(-2.37785e-05, 3.66011, 1.40535e-05)
bones/27/position = Vector3(4.72584, 10.9082, 0.226131)
bones/27/rotation = Quaternion(0.233869, -0.0034725, -0.0488719, 0.971033)
bones/28/position = Vector3(-4.90378e-07, 4.13666, -1.29153e-06)
bones/28/rotation = Quaternion(0.151253, -5.62804e-05, -0.0158644, 0.988368)
bones/29/position = Vector3(1.92898e-07, 2.59482, 4.69966e-06)
bones/29/rotation = Quaternion(0.143503, 3.35827e-05, -0.0144772, 0.989544)
bones/31/rotation = Quaternion(0.600117, -0.434656, 0.524222, 0.419673)
bones/32/position = Vector3(-3.57628e-07, 12.9223, 1.30742e-05)
bones/32/rotation = Quaternion(0.464365, -0.262975, -0.232705, 0.813055)
bones/33/rotation = Quaternion(3.07857e-07, 1.82198e-09, -0.0583806, 0.998294)
bones/34/rotation = Quaternion(0.0590255, 0.175139, -0.0059544, 0.982755)
bones/35/rotation = Quaternion(0.213786, 0.0653715, -0.225648, 0.948212)
bones/36/position = Vector3(5.90085e-06, 4.74495, -1.91898e-05)
bones/36/rotation = Quaternion(-0.144093, -0.0761721, 0.277207, 0.946885)
bones/37/position = Vector3(-5.84126e-06, 4.38215, 1.93096e-05)
bones/37/rotation = Quaternion(-0.1552, 0.0746794, -0.0260449, 0.984712)
bones/38/position = Vector3(1.41859e-05, 3.45906, -2.79579e-05)
bones/39/position = Vector3(2.82204, 12.2666, 0.231828)
bones/39/rotation = Quaternion(0.059513, -0.000991591, -0.0109806, 0.998167)
bones/40/position = Vector3(1.20817e-07, 3.89197, -6.39381e-06)
bones/40/rotation = Quaternion(0.151289, 8.04968e-07, 0.0123284, 0.988413)
bones/41/position = Vector3(-1.25651e-05, 3.41516, 3.42749e-07)
bones/41/rotation = Quaternion(0.0702163, -1.65576e-08, 0.00571996, 0.997515)
bones/42/position = Vector3(-5.19799e-07, 3.07799, -5.84643e-06)
bones/43/position = Vector3(1.69482e-05, 12.7755, 1.851e-05)
bones/43/rotation = Quaternion(0.130516, 0.00368979, 0.0189218, 0.991259)
bones/44/rotation = Quaternion(0.151544, 2.76323e-07, 0.0123452, 0.988373)
bones/45/rotation = Quaternion(0.160239, 4.47029e-08, 0.0130536, 0.986992)
bones/46/position = Vector3(2.82139e-05, 3.68019, -1.8991e-06)
bones/47/rotation = Quaternion(0.177453, 0.00450082, 0.0264542, 0.983763)
bones/48/rotation = Quaternion(0.181735, 1.6119e-06, 0.0148125, 0.983236)
bones/49/position = Vector3(2.74445e-08, 3.3073, -4.63963e-06)
bones/49/rotation = Quaternion(0.15551, 1.8987e-07, 0.0126684, 0.987753)
bones/50/position = Vector3(2.28835e-05, 3.66011, 3.86379e-06)
bones/51/position = Vector3(-4.72583, 10.9082, 0.226141)
bones/51/rotation = Quaternion(0.228495, 0.00340218, 0.0429777, 0.97259)
bones/52/position = Vector3(2.37961e-08, 4.13665, 5.94933e-06)
bones/52/rotation = Quaternion(0.151548, 1.73821e-06, 0.0123558, 0.988373)
bones/53/position = Vector3(-1.60831e-06, 2.59484, -8.97971e-06)
bones/53/rotation = Quaternion(0.143773, -1.48116e-06, 0.0117016, 0.989542)
bones/54/position = Vector3(-2.7547e-06, 2.92387, 6.43533e-06)
bones/55/rotation = Quaternion(0.136001, 0.0783788, 0.984493, -0.0783224)
bones/56/rotation = Quaternion(-0.132543, -0.0144693, 0.0321536, 0.99055)
bones/57/rotation = Quaternion(0.534471, -0.0216954, -0.027452, 0.844462)
bones/58/rotation = Quaternion(0.269344, -0.0323758, -0.0145916, 0.962389)
bones/60/rotation = Quaternion(-0.0902664, -0.0167302, 0.995415, -0.0268558)
bones/61/rotation = Quaternion(-0.0740945, 0.0840275, -0.0245553, 0.993401)
bones/62/rotation = Quaternion(0.56544, 0.0113454, -0.00851599, 0.824668)
bones/63/rotation = Quaternion(0.289085, 0.0318906, 0.0140794, 0.956668)

[node name="AboveHead" type="Sprite3D" parent="Visuals"]
transform = Transform3D(1.77, 0, 0, 0, 1.77, 0, 0, 0, 1.77, 0, 5.53385, 0)
visible = false
sorting_offset = 1.0
flip_h = true
no_depth_test = true
texture = SubResource("ViewportTexture_23jgk")

[node name="SubViewport" type="SubViewport" parent="Visuals/AboveHead"]
size = Vector2i(200, 50)

[node name="Username" type="Label" parent="Visuals/AboveHead/SubViewport"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -45.0
offset_top = -11.5
offset_right = 45.0
offset_bottom = 11.5
grow_horizontal = 2
grow_vertical = 2
text = "SomeName"
horizontal_alignment = 1
vertical_alignment = 1

[node name="AbilityManager" type="Node3D" parent="." node_paths=PackedStringArray("camera", "player", "playerVisuals")]
transform = Transform3D(0.999957, 2.99753e-05, -0.00928451, 0, 0.999995, 0.00322851, 0.00928456, -0.00322837, 0.999952, 0.00895208, 3.07948, -0.0949779)
script = ExtResource("2_c20k6")
camera = NodePath("../Cameras/FirstPersonCamera")
player = NodePath("..")
playerVisuals = NodePath("../Visuals")
hollowPurpleResource = ExtResource("6_i7tg1")
currentAbilityIndex = null

[node name="Cameras" type="Node3D" parent="."]

[node name="FirstPersonCamera" type="Camera3D" parent="Cameras"]
transform = Transform3D(0.999957, 2.99753e-05, -0.00928451, 0, 0.999995, 0.00322851, 0.00928456, -0.00322837, 0.999952, 0.00895208, 3.07948, -0.0949779)
current = true
fov = 85.0
script = ExtResource("3_amtfd")

[node name="AbilityManagerRemoteTransform" type="RemoteTransform3D" parent="Cameras/FirstPersonCamera"]
remote_path = NodePath("../../../AbilityManager")

[node name="ThirdPerson" type="SpringArm3D" parent="Cameras"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.088474, 1.49913, 0)
spring_length = 7.0
margin = 0.2
script = ExtResource("8_5iau8")

[node name="ThirdPersonCamera" type="Camera3D" parent="Cameras/ThirdPerson"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 13.4263)

[node name="CameraMount" type="Node3D" parent="Cameras"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3, 0)

[node name="SpringArm3D" type="SpringArm3D" parent="Cameras/CameraMount"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.01111, 1.47838, 0)
spring_length = 7.0
margin = 0.2

[node name="Camera3D" type="Camera3D" parent="Cameras/CameraMount/SpringArm3D"]

[node name="MapCamera" parent="Cameras" instance=ExtResource("11_8ulp4")]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 73.1443, 0)
top_level = true

[node name="HealthModule" type="Node" parent="."]
script = ExtResource("10_icsec")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.023737, 1.16589, -0.00927365)
shape = SubResource("CapsuleShape3D_ua1y4")

[node name="MultiplayerSynchronizer" type="MultiplayerSynchronizer" parent="."]
replication_config = SubResource("SceneReplicationConfig_4ipxv")

[connection signal="Died" from="HealthModule" to="." method="_on_health_module_died"]

[editable path="Visuals/MainCharacter"]
